<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tech 2 - System Optimization (1280x720)</title>
    
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        @media print {
            @page { size: 33.86cm 19.05cm; margin: 0; }
            body { margin: 0 !important; -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
        }
        body { font-family: 'Pretendard', sans-serif; background: #333; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }

        .page-container {
            width: 1280px; height: 720px;
            background-color: #f8fafc;
            display: flex; flex-direction: column;
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
            overflow: hidden; position: relative;
            background-image: radial-gradient(at 0% 0%, rgba(167, 139, 250, 0.15) 0px, transparent 50%),
                              radial-gradient(at 100% 100%, rgba(244, 114, 182, 0.1) 0px, transparent 50%);
        }

        .top-line { position: absolute; top: 0; left: 0; width: 100%; height: 5px; background: #0f172a; z-index: 30; }
        .glass-card { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.9); border-radius: 1.2rem; }
        
        .badge { font-size: 0.8rem; font-weight: 800; padding: 0.3rem 0.8rem; border-radius: 9999px; text-transform: uppercase; }
        .badge-navy { background: #0f172a; color: white; }

        /* [수정] translateY -40px -> -30px (공간 확보) */
        .code-block { 
            background: #1e293b; 
            color: #e2e8f0; 
            padding: 1rem; 
            border-radius: 0.8rem; 
            font-size: 0.8rem; 
            line-height: 1.5; 
            font-family: 'JetBrains Mono', monospace; 
            overflow: hidden; 
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.3);
            transform: translateY(-30px); 
        }
        .kw { color: #c792ea; } .fn { color: #82aaff; } .st { color: #c3e88d; } .cm { color: #546e7a; font-style: italic; }
    </style>
</head>
<body>

    <div class="page-container p-10 pt-12 pb-8">
        <div class="top-line"></div>

        <header class="mb-6 px-2">
            <div class="flex items-center gap-3 mb-2">
                <span class="badge badge-navy">Key Engineering 02</span>
                <span class="text-indigo-600 font-black text-sm uppercase tracking-widest">Performance</span>
            </div>
            <h1 class="text-5xl font-black text-slate-900 tracking-tight">하루의 조각 : System Optimization</h1>
        </header>

        <div class="grid grid-cols-3 gap-6 flex-1 min-h-0">
            
            <div class="glass-card p-6 border-t-[6px] border-indigo-500 shadow-2xl flex flex-col justify-between">
                <div>
                    <h3 class="font-bold text-slate-800 text-2xl mb-4 flex items-center gap-3 leading-tight">
                        <i class="fas fa-bolt text-indigo-500 text-3xl"></i> <span>트랜잭션<br>최적화</span>
                    </h3>
                    <div class="space-y-4">
                        <div>
                            <span class="text-xs font-black text-rose-500 bg-rose-50 px-2 py-0.5 rounded uppercase tracking-wide">Problem</span>
                            <p class="text-[15px] text-slate-700 mt-1.5 leading-snug font-bold italic">
                                API 호출 시 DB 커넥션을 장시간 점유하여 커넥션 풀 고갈 위험.
                            </p>
                        </div>
                        <div>
                            <span class="text-xs font-black text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded uppercase tracking-wide">Solution</span>
                            <p class="text-[15px] text-slate-800 mt-1.5 leading-snug font-bold">
                                TransactionTemplate으로 범위를 좁히고 @Async 논블로킹 처리.
                            </p>
                        </div>
                    </div>
                </div>
                <div class="code-block mt-4">
<span class="kw">@Async</span>
<span class="kw">public void</span> <span class="fn">analyzeEmotion</span>() {
  <span class="fn">callGeminiAPI</span>(); <span class="cm">// No TX</span>
  txTemplate.<span class="fn">execute</span>(s -> <span class="fn">save</span>());
}
                </div>
            </div>

            <div class="glass-card p-6 border-t-[6px] border-sky-500 shadow-2xl flex flex-col justify-between">
                <div>
                    <h3 class="font-bold text-slate-800 text-2xl mb-4 flex items-center gap-3 leading-tight">
                        <i class="fas fa-database text-sky-500 text-3xl"></i> <span>JPA N+1<br>문제 해결</span>
                    </h3>
                    <div class="space-y-4">
                        <div>
                            <span class="text-xs font-black text-rose-500 bg-rose-50 px-2 py-0.5 rounded uppercase tracking-wide">Problem</span>
                            <p class="text-[15px] text-slate-700 mt-1.5 leading-snug font-bold italic">
                                목록 조회 시 감정 엔티티 지연 로딩으로 추가 쿼리 대량 발생.
                            </p>
                        </div>
                        <div>
                            <span class="text-xs font-black text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded uppercase tracking-wide">Solution</span>
                            <p class="text-[15px] text-slate-800 mt-1.5 leading-snug font-bold">
                                @EntityGraph를 적용하여 단일 Join 쿼리로 성능 90% 개선.
                            </p>
                        </div>
                    </div>
                </div>
                <div class="code-block mt-4">
<span class="kw">@EntityGraph</span>(attributePaths={<span class="st">"emotions"</span>})
<span class="kw">@Query</span>(<span class="st">"SELECT d FROM DiaryRecord d"</span>)
List&lt;DiaryRecord&gt; <span class="fn">findAll</span>();
                </div>
            </div>

            <div class="glass-card p-6 border-t-[6px] border-fuchsia-500 shadow-2xl flex flex-col justify-between">
                <div>
                    <h3 class="font-bold text-slate-800 text-2xl mb-4 flex items-center gap-3 leading-tight">
                        <i class="fas fa-layer-group text-fuchsia-500 text-3xl"></i> <span>하이브리드<br>캐싱</span>
                    </h3>
                    <div class="space-y-4">
                        <div>
                            <span class="text-xs font-black text-rose-500 bg-rose-50 px-2 py-0.5 rounded uppercase tracking-wide">Problem</span>
                            <p class="text-[15px] text-slate-700 mt-1.5 leading-snug font-bold italic">
                                동일 내용 중복 분석으로 인한 AI API 비용 낭비 및 응답 지연.
                            </p>
                        </div>
                        <div>
                            <span class="text-xs font-black text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded uppercase tracking-wide">Solution</span>
                            <p class="text-[15px] text-slate-800 mt-1.5 leading-snug font-bold">
                                SHA-256 해싱 및 Redis(L1) + DB(L2) 캐싱으로 비용 절감.
                            </p>
                        </div>
                    </div>
                </div>
                <div class="code-block mt-4">
<span class="kw">public</span> String <span class="fn">generateHash</span>(String txt) {
  txt = <span class="fn">normalize</span>(txt);
  <span class="kw">return</span> <span class="fn">sha256</span>(txt); 
}
<span class="cm">// Flow: Redis -> DB -> API</span>
                </div>
            </div>

        </div>
    </div>

</body>
</html>